-- Killer list
local killerNames = { "Jason", "c00lkidd", "JohnDoe", "1x1x1x1", "Noli", "Slasher" }

-- Services
local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")

local player = Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local hrp = character:WaitForChild("HumanoidRootPart")

local holdingT = false
local MAX_DISTANCE = 8 -- Only follow if killer is within 8 studs

-- Function to find nearest killer within distance
local function getNearestKiller()
    local nearest = nil
    local nearestDistance = math.huge

    for _, p in pairs(Players:GetPlayers()) do
        if table.find(killerNames, p.Name) and p.Character and p.Character:FindFirstChild("HumanoidRootPart") then
            local dist = (p.Character.HumanoidRootPart.Position - hrp.Position).Magnitude
            if dist < nearestDistance and dist <= MAX_DISTANCE then
                nearestDistance = dist
                nearest = p.Character
            end
        end
    end

    return nearest
end

-- Continuous lerp behind killer while facing them
RunService.RenderStepped:Connect(function(deltaTime)
    if holdingT then
        local target = getNearestKiller()
        if target and target:FindFirstChild("HumanoidRootPart") then
            local targetHRP = target.HumanoidRootPart
            local offset = targetHRP.CFrame.LookVector * -3 -- 3 studs behind
            local desiredPosition = targetHRP.Position + offset
            local lookAt = targetHRP.Position -- face the killer

            local desiredCFrame = CFrame.new(desiredPosition, lookAt)
            hrp.CFrame = hrp.CFrame:Lerp(desiredCFrame, 0.1) -- smooth lerp
        end
    end
end)

-- Key press listeners
UserInputService.InputBegan:Connect(function(input, gameProcessed)
    if gameProcessed then return end
    if input.KeyCode == Enum.KeyCode.T then
        holdingT = true
    end
end)

UserInputService.InputEnded:Connect(function(input)
    if input.KeyCode == Enum.KeyCode.T then
        holdingT = false
    end
end)
